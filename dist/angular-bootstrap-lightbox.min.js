/*! angular-bootstrap-lightbox */
angular.module("bootstrapLightbox",["swfobject","ui.bootstrap.modal","ui.bootstrap.tpls"]),angular.module("bootstrapLightbox").run(["$templateCache",function(a){"use strict";a.put("lightbox.html",'<div class=modal-body ng-swipe-left=Lightbox.nextImage() ng-swipe-right=Lightbox.prevImage()><div class=lightbox-nav><button class=close aria-hidden=true ng-click=$dismiss()>Ã—</button></div><div class=lightbox-image-container><div ng-if=Lightbox.showFlash><swf-object lightbox-flash lightbox-src={{Lightbox.imageUrl}} swf-url={{Lightbox.imageUrl}} swf-width={{Lightbox.width}} swf-height={{Lightbox.height}}></swf-object></div><img ng-if=!Lightbox.showFlash lightbox-src={{Lightbox.imageUrl}} alt=""></div></div>')}]),angular.module("bootstrapLightbox").service("ImageLoader",["$q",function(a){this.load=function(b){var c=a.defer(),d=new Image;return d.onload=function(){("boolean"==typeof this.complete&&this.complete===!1||"number"==typeof this.naturalWidth&&0===this.naturalWidth)&&c.reject(),c.resolve(d)},d.onerror=function(){c.reject()},d.src=b,c.promise}}]),angular.module("bootstrapLightbox").provider("Lightbox",function(){this.templateUrl="lightbox.html",this.isFlash=function(a){return/\.swf$/.test(a)},this.calculateImageDimensionLimits=function(a){return a.windowWidth>=768?{maxWidth:a.windowWidth-92,maxHeight:a.windowHeight-126}:{maxWidth:a.windowWidth-52,maxHeight:a.windowHeight-86}},this.calculateModalDimensions=function(a){var b=Math.max(400,Number(a.imageDisplayWidth)+32),c=Math.max(200,Number(a.imageDisplayHeight)+66);return(b>=a.windowWidth-20||a.windowWidth<768)&&(b="auto"),c>=a.windowHeight&&(c="auto"),{width:b,height:c}},this.$get=["$document","$modal","$timeout","ImageLoader",function(a,b,c,d){var e={};return e.templateUrl=this.templateUrl,e.isFlash=this.isFlash,e.calculateImageDimensionLimits=this.calculateImageDimensionLimits,e.calculateModalDimensions=this.calculateModalDimensions,e.imageUrl="",e.modalInstance=null,e.openModal=function(a,c,d){return e.setImage(a),c&&(e.width=c),d&&(e.height=d),e.modalInstance=b.open({templateUrl:e.templateUrl,controller:["$scope",function(a){a.Lightbox=e,e.keyboardNavEnabled=!0}],windowClass:"lightbox-modal"}),e.modalInstance.result["finally"](function(){e.imageUrl=null,e.showFlash=null}),e.modalInstance},e.closeModal=function(a){return e.modalInstance.close(a)},e.setImage=function(a){var b=a;e.showFlash=e.isFlash(a),e.showFlash?e.imageUrl=a:d.load(b).then(function(){e.imageUrl=b},function(){e.imageUrl="//:0"})},e}]}),angular.module("bootstrapLightbox").directive("lightboxSrc",["$window","ImageLoader","Lightbox",function(a,b,c){var d=0,e=0;return{link:function(f,g,h){var i=function(){var b=a.innerWidth,f=a.innerHeight,h=c.calculateImageDimensionLimits({windowWidth:b,windowHeight:f,imageWidth:d,imageHeight:e}),i=angular.extend({width:d,height:e,minWidth:1,minHeight:1,maxWidth:3e3,maxHeight:3e3},h),j=c.calculateModalDimensions({windowWidth:b,windowHeight:f,imageDisplayWidth:i.width,imageDisplayHeight:i.height});g.css({width:i.width+"px",height:i.height+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-dialog")).css({width:j.width+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-content")).css({height:j.height+"px"})};f.$watch(function(){return h.lightboxSrc},function(a){return a&&angular.isDefined(h.lightboxFlash)?(d=h.swfWidth,e=h.swfHeight,void i()):(g[0].src="//:0",void b.load(a).then(function(b){d=b.naturalWidth,e=b.naturalHeight,i(),g[0].src=a}))}),angular.element(a).on("resize",i)}}}]);